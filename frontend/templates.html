<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>القوالب القانونية - Quick Link System</title>
    
    <!-- Bootstrap CSS -->
    <link href="assets/css/bootstrap.rtl.min.css" rel="stylesheet">
    
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <!-- Custom CSS -->
    <link href="assets/css/custom.css" rel="stylesheet">
    
    <!-- Custom Font -->
    <link href="assets/fonts/JF-Flat-Regular.ttf" rel="stylesheet">
</head>
<body>
    <!-- Header -->
    <div id="header-placeholder"></div>
    
    <!-- Sidebar -->
    <div id="sidebar-placeholder"></div>
    
    <!-- Main Content -->
    <div class="main-content-wrapper">
        <main class="main-content">
            <!-- Page Title -->
            <div class="d-flex justify-content-between align-items-center mb-4">
                <h2 class="mb-0">
                    <i class="fas fa-file-contract me-2 text-primary"></i>
                    القوالب المركزية القانونية
                </h2>
                <button class="btn btn-primary" onclick="createNewTemplate()" disabled title="صلاحية مشرف أعلى فقط">
                    <i class="fas fa-plus me-1"></i>
                    إضافة قالب جديد
                </button>
            </div>

            <!-- Important Notice -->
            <div class="alert alert-warning mb-4">
                <i class="fas fa-exclamation-triangle me-2"></i>
                <strong>مهم:</strong> هذه القوالب المركزية فقط. لا يُسمح بإنشاء قوالب خارجية أو استخدام قوالب قديمة. جميع القوالب محدثة ومصادق عليها قانونياً.
            </div>

            <!-- Search and Filters -->
            <div class="card shadow-custom mb-4">
                <div class="card-body">
                    <div class="row">
                        <div class="col-md-4 mb-3">
                            <label class="form-label">البحث في القوالب</label>
                            <div class="input-group">
                                <span class="input-group-text">
                                    <i class="fas fa-search"></i>
                                </span>
                                <input type="text" class="form-control" placeholder="البحث بالاسم أو المحتوى" id="templateSearchInput">
                            </div>
                        </div>
                        <div class="col-md-3 mb-3">
                            <label class="form-label">فلترة حسب النوع</label>
                            <select class="form-control" id="typeFilter">
                                <option value="all">جميع الأنواع</option>
                                <option value="authorization">تفويض</option>
                                <option value="agreement">اتفاقية</option>
                                <option value="contract">عقد</option>
                                <option value="declaration">إقرار</option>
                            </select>
                        </div>
                        <div class="col-md-3 mb-3">
                            <label class="form-label">فلترة حسب الحالة</label>
                            <select class="form-control" id="statusFilter">
                                <option value="all">جميع الحالات</option>
                                <option value="active">نشط</option>
                                <option value="draft">مسودة</option>
                                <option value="archived">مؤرشف</option>
                            </select>
                        </div>
                        <div class="col-md-2 mb-3">
                            <label class="form-label">&nbsp;</label>
                            <div class="d-grid">
                                <button class="btn btn-outline-primary" onclick="clearTemplateFilters()">
                                    <i class="fas fa-times me-1"></i>
                                    مسح الفلاتر
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Template Stats -->
            <div class="row mb-4">
                <div class="col-xl-3 col-md-6 mb-3">
                    <div class="card stats-card">
                        <div class="card-body text-center">
                            <i class="fas fa-file-alt icon-large text-primary"></i>
                            <div class="stats-number" id="totalTemplatesCount">12</div>
                            <div class="stats-label">إجمالي القوالب</div>
                        </div>
                    </div>
                </div>
                <div class="col-xl-3 col-md-6 mb-3">
                    <div class="card stats-card">
                        <div class="card-body text-center">
                            <i class="fas fa-check-circle icon-large text-success"></i>
                            <div class="stats-number" id="activeTemplatesCount">9</div>
                            <div class="stats-label">قوالب نشطة</div>
                        </div>
                    </div>
                </div>
                <div class="col-xl-3 col-md-6 mb-3">
                    <div class="card stats-card">
                        <div class="card-body text-center">
                            <i class="fas fa-edit icon-large text-warning"></i>
                            <div class="stats-number" id="draftTemplatesCount">2</div>
                            <div class="stats-label">مسودات</div>
                        </div>
                    </div>
                </div>
                <div class="col-xl-3 col-md-6 mb-3">
                    <div class="card stats-card">
                        <div class="card-body text-center">
                            <i class="fas fa-download icon-large text-info"></i>
                            <div class="stats-number" id="usageCount">245</div>
                            <div class="stats-label">مرات الاستخدام</div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Templates Grid -->
            <div class="row">
                <!-- Template Card 1 -->
                <div class="col-lg-4 col-md-6 mb-4">
                    <div class="card template-card shadow-custom">
                        <div class="card-header bg-primary text-white">
                            <div class="d-flex justify-content-between align-items-center">
                                <h6 class="mb-0">
                                    <i class="fas fa-file-signature me-1"></i>
                                    تفويض ربط حساب
                                </h6>
                                <span class="badge bg-success">نشط</span>
                            </div>
                        </div>
                        <div class="card-body">
                            <p class="text-muted mb-3">
                                <small>تفويض رسمي لربط حساب العميل مع بوابة الدفع الإلكتروني</small>
                            </p>
                            <div class="template-meta mb-3">
                                <div class="d-flex justify-content-between mb-2">
                                    <span class="text-muted">النوع:</span>
                                    <span class="badge bg-info">تفويض</span>
                                </div>
                                <div class="d-flex justify-content-between mb-2">
                                    <span class="text-muted">مرات الاستخدام:</span>
                                    <strong>85 مرة</strong>
                                </div>
                                <div class="d-flex justify-content-between">
                                    <span class="text-muted">آخر تحديث:</span>
                                    <small>15 يناير 2025</small>
                                </div>
                            </div>
                            <div class="btn-group w-100" role="group">
                                <button class="btn btn-outline-primary btn-sm" onclick="viewTemplate(1)">
                                    <i class="fas fa-eye"></i>
                                    عرض
                                </button>
                                <button class="btn btn-outline-success btn-sm" onclick="useTemplate(1)">
                                    <i class="fas fa-file-download"></i>
                                    استخدام
                                </button>
                                <button class="btn btn-outline-warning btn-sm" onclick="editTemplate(1)">
                                    <i class="fas fa-edit"></i>
                                    تعديل
                                </button>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Template Card 2 -->
                <div class="col-lg-4 col-md-6 mb-4">
                    <div class="card template-card shadow-custom">
                        <div class="card-header bg-success text-white">
                            <div class="d-flex justify-content-between align-items-center">
                                <h6 class="mb-0">
                                    <i class="fas fa-handshake me-1"></i>
                                    اتفاقية الخدمة
                                </h6>
                                <span class="badge bg-light text-dark">نشط</span>
                            </div>
                        </div>
                        <div class="card-body">
                            <p class="text-muted mb-3">
                                <small>اتفاقية تقديم خدمات الربط الإلكتروني للعميل</small>
                            </p>
                            <div class="template-meta mb-3">
                                <div class="d-flex justify-content-between mb-2">
                                    <span class="text-muted">النوع:</span>
                                    <span class="badge bg-success">اتفاقية</span>
                                </div>
                                <div class="d-flex justify-content-between mb-2">
                                    <span class="text-muted">مرات الاستخدام:</span>
                                    <strong>62 مرة</strong>
                                </div>
                                <div class="d-flex justify-content-between">
                                    <span class="text-muted">آخر تحديث:</span>
                                    <small>10 يناير 2025</small>
                                </div>
                            </div>
                            <div class="btn-group w-100" role="group">
                                <button class="btn btn-outline-primary btn-sm" onclick="viewTemplate(2)">
                                    <i class="fas fa-eye"></i>
                                    عرض
                                </button>
                                <button class="btn btn-outline-success btn-sm" onclick="useTemplate(2)">
                                    <i class="fas fa-file-download"></i>
                                    استخدام
                                </button>
                                <button class="btn btn-outline-warning btn-sm" onclick="editTemplate(2)">
                                    <i class="fas fa-edit"></i>
                                    تعديل
                                </button>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Template Card 3 -->
                <div class="col-lg-4 col-md-6 mb-4">
                    <div class="card template-card shadow-custom">
                        <div class="card-header bg-warning text-dark">
                            <div class="d-flex justify-content-between align-items-center">
                                <h6 class="mb-0">
                                    <i class="fas fa-file-contract me-1"></i>
                                    عقد الخدمات المالية
                                </h6>
                                <span class="badge bg-light text-dark">نشط</span>
                            </div>
                        </div>
                        <div class="card-body">
                            <p class="text-muted mb-3">
                                <small>عقد تقديم الخدمات المالية والدفع الإلكتروني</small>
                            </p>
                            <div class="template-meta mb-3">
                                <div class="d-flex justify-content-between mb-2">
                                    <span class="text-muted">النوع:</span>
                                    <span class="badge bg-warning text-dark">عقد</span>
                                </div>
                                <div class="d-flex justify-content-between mb-2">
                                    <span class="text-muted">مرات الاستخدام:</span>
                                    <strong>45 مرة</strong>
                                </div>
                                <div class="d-flex justify-content-between">
                                    <span class="text-muted">آخر تحديث:</span>
                                    <small>5 يناير 2025</small>
                                </div>
                            </div>
                            <div class="btn-group w-100" role="group">
                                <button class="btn btn-outline-primary btn-sm" onclick="viewTemplate(3)">
                                    <i class="fas fa-eye"></i>
                                    عرض
                                </button>
                                <button class="btn btn-outline-success btn-sm" onclick="useTemplate(3)">
                                    <i class="fas fa-file-download"></i>
                                    استخدام
                                </button>
                                <button class="btn btn-outline-warning btn-sm" onclick="editTemplate(3)">
                                    <i class="fas fa-edit"></i>
                                    تعديل
                                </button>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Template Card 4 -->
                <div class="col-lg-4 col-md-6 mb-4">
                    <div class="card template-card shadow-custom">
                        <div class="card-header bg-info text-white">
                            <div class="d-flex justify-content-between align-items-center">
                                <h6 class="mb-0">
                                    <i class="fas fa-clipboard-check me-1"></i>
                                    إقرار العميل
                                </h6>
                                <span class="badge bg-light text-dark">نشط</span>
                            </div>
                        </div>
                        <div class="card-body">
                            <p class="text-muted mb-3">
                                <small>إقرار العميل بصحة البيانات المقدمة</small>
                            </p>
                            <div class="template-meta mb-3">
                                <div class="d-flex justify-content-between mb-2">
                                    <span class="text-muted">النوع:</span>
                                    <span class="badge bg-info">إقرار</span>
                                </div>
                                <div class="d-flex justify-content-between mb-2">
                                    <span class="text-muted">مرات الاستخدام:</span>
                                    <strong>38 مرة</strong>
                                </div>
                                <div class="d-flex justify-content-between">
                                    <span class="text-muted">آخر تحديث:</span>
                                    <small>1 يناير 2025</small>
                                </div>
                            </div>
                            <div class="btn-group w-100" role="group">
                                <button class="btn btn-outline-primary btn-sm" onclick="viewTemplate(4)">
                                    <i class="fas fa-eye"></i>
                                    عرض
                                </button>
                                <button class="btn btn-outline-success btn-sm" onclick="useTemplate(4)">
                                    <i class="fas fa-file-download"></i>
                                    استخدام
                                </button>
                                <button class="btn btn-outline-warning btn-sm" onclick="editTemplate(4)">
                                    <i class="fas fa-edit"></i>
                                    تعديل
                                </button>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Template Card 5 (Draft) -->
                <div class="col-lg-4 col-md-6 mb-4">
                    <div class="card template-card shadow-custom">
                        <div class="card-header bg-secondary text-white">
                            <div class="d-flex justify-content-between align-items-center">
                                <h6 class="mb-0">
                                    <i class="fas fa-file-alt me-1"></i>
                                    سياسة الخصوصية
                                </h6>
                                <span class="badge bg-warning text-dark">مسودة</span>
                            </div>
                        </div>
                        <div class="card-body">
                            <p class="text-muted mb-3">
                                <small>سياسة حماية البيانات والخصوصية للعملاء</small>
                            </p>
                            <div class="template-meta mb-3">
                                <div class="d-flex justify-content-between mb-2">
                                    <span class="text-muted">النوع:</span>
                                    <span class="badge bg-secondary">إقرار</span>
                                </div>
                                <div class="d-flex justify-content-between mb-2">
                                    <span class="text-muted">مرات الاستخدام:</span>
                                    <strong>0 مرة</strong>
                                </div>
                                <div class="d-flex justify-content-between">
                                    <span class="text-muted">آخر تحديث:</span>
                                    <small>20 يناير 2025</small>
                                </div>
                            </div>
                            <div class="btn-group w-100" role="group">
                                <button class="btn btn-outline-primary btn-sm" onclick="viewTemplate(5)">
                                    <i class="fas fa-eye"></i>
                                    عرض
                                </button>
                                <button class="btn btn-outline-success btn-sm" onclick="publishTemplate(5)">
                                    <i class="fas fa-check"></i>
                                    نشر
                                </button>
                                <button class="btn btn-outline-warning btn-sm" onclick="editTemplate(5)">
                                    <i class="fas fa-edit"></i>
                                    تعديل
                                </button>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Template Card 6 -->
                <div class="col-lg-4 col-md-6 mb-4">
                    <div class="card template-card shadow-custom">
                        <div class="card-header bg-danger text-white">
                            <div class="d-flex justify-content-between align-items-center">
                                <h6 class="mb-0">
                                    <i class="fas fa-ban me-1"></i>
                                    إخلاء المسؤولية
                                </h6>
                                <span class="badge bg-light text-dark">نشط</span>
                            </div>
                        </div>
                        <div class="card-body">
                            <p class="text-muted mb-3">
                                <small>بنود إخلاء المسؤولية القانونية</small>
                            </p>
                            <div class="template-meta mb-3">
                                <div class="d-flex justify-content-between mb-2">
                                    <span class="text-muted">النوع:</span>
                                    <span class="badge bg-danger">إقرار</span>
                                </div>
                                <div class="d-flex justify-content-between mb-2">
                                    <span class="text-muted">مرات الاستخدام:</span>
                                    <strong>15 مرة</strong>
                                </div>
                                <div class="d-flex justify-content-between">
                                    <span class="text-muted">آخر تحديث:</span>
                                    <small>18 يناير 2025</small>
                                </div>
                            </div>
                            <div class="btn-group w-100" role="group">
                                <button class="btn btn-outline-primary btn-sm" onclick="viewTemplate(6)">
                                    <i class="fas fa-eye"></i>
                                    عرض
                                </button>
                                <button class="btn btn-outline-success btn-sm" onclick="useTemplate(6)">
                                    <i class="fas fa-file-download"></i>
                                    استخدام
                                </button>
                                <button class="btn btn-outline-warning btn-sm" onclick="editTemplate(6)">
                                    <i class="fas fa-edit"></i>
                                    تعديل
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <!-- Footer -->
    <div class="footer-wrapper">
        <div id="footer-placeholder"></div>
    </div>

    <!-- Modals -->
    <div id="modal-placeholder"></div>

    <!-- Bootstrap JS -->
    <script src="assets/js/bootstrap.bundle.min.js"></script>
    
    <!-- Custom JS -->
    <script src="assets/js/custom.js"></script>
    
    <!-- Page-specific JavaScript -->
    <script>
        function clearTemplateFilters() {
            document.getElementById('templateSearchInput').value = '';
            document.getElementById('typeFilter').value = 'all';
            document.getElementById('statusFilter').value = 'all';
        }

        function createNewTemplate() {
            showSuccess('فتح نموذج إنشاء قالب جديد...');
        }

        function viewTemplate(id) {
            showSuccess(`عرض القالب رقم ${id}`);
        }

        function useTemplate(id) {
            showConfirm(
                'استخدام القالب',
                `هل تريد استخدام القالب رقم ${id} في طلب جديد؟`,
                'success',
                function() {
                    showSuccess('تم تطبيق القالب بنجاح!');
                }
            );
        }

        function editTemplate(id) {
            showConfirm(
                'تعديل القالب',
                `هل تريد تعديل القالب رقم ${id}؟ (صلاحية مدير فقط)`,
                'warning',
                function() {
                    showSuccess('جارٍ فتح محرر القالب...');
                }
            );
        }

        function publishTemplate(id) {
            showConfirm(
                'نشر القالب',
                'هل أنت متأكد من نشر هذا القالب؟ سيصبح متاحاً لجميع المستخدمين.',
                'primary',
                function() {
                    showSuccess(`تم نشر القالب رقم ${id} بنجاح!`);
                }
            );
        }
    </script>
    
    <!-- Load Components -->
    <script>
        Promise.all([
            fetch('components/header.html').then(r => r.text()),
            fetch('components/sidebar.html').then(r => r.text()),
            fetch('components/footer.html').then(r => r.text()),
            fetch('components/confirm-modal.html').then(r => r.text())
        ]).then(([header, sidebar, footer, modal]) => {
            document.getElementById('header-placeholder').innerHTML = header;
            document.getElementById('sidebar-placeholder').innerHTML = sidebar;
            document.getElementById('footer-placeholder').innerHTML = footer;
            document.getElementById('modal-placeholder').innerHTML = modal;
        }).catch(error => {
            console.error('خطأ في تحميل المكونات:', error);
        });
    </script>
</body>
</html>

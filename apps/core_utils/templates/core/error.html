<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    {% load static %}
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>خطأ - Quick Link System</title>
    
    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="{% static 'assets/css/bootstrap.min.css' %}">
    <link rel="stylesheet" href="{% static 'assets/css/bootstrap.rtl.min.css' %}">
    
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <!-- Custom CSS -->
    <link rel="stylesheet" href="{% static 'assets/css/custom.css' %}">
    
    <style>
        body {
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .error-container {
            max-width: 600px;
            width: 100%;
            padding: 20px;
            text-align: center;
        }
        
        .error-card {
            background: white;
            border-radius: 15px;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.1);
            padding: 50px 30px;
        }
        
        .error-icon {
            font-size: 8rem;
            margin-bottom: 30px;
        }
        
        .error-code {
            font-size: 6rem;
            font-weight: 700;
            color: var(--primary-blue);
            line-height: 1;
            margin-bottom: 20px;
        }
    </style>
</head>
<body>
    <div class="error-container">
        <div class="error-card">
            <!-- Error Icon -->
            <div class="error-icon" id="errorIcon">
                <i class="fas fa-exclamation-triangle text-warning"></i>
            </div>

            <!-- Error Code -->
            <div class="error-code" id="errorCode">404</div>

            <!-- Error Title -->
            <h2 class="mb-3" id="errorTitle">الصفحة غير موجودة</h2>

            <!-- Error Description -->
            <p class="text-muted mb-4" id="errorDescription">
                عذراً، الصفحة التي تبحث عنها غير موجودة أو تم نقلها إلى مكان آخر.
            </p>

            <!-- Actions -->
            <div class="d-grid gap-2 d-md-flex justify-content-md-center">
                <a href="{% url 'requests:dashboard' %}" class="btn btn-primary btn-lg">
                    <i class="fas fa-home me-2"></i>
                    العودة للرئيسية
                </a>
                <button class="btn btn-outline-secondary btn-lg" onclick="history.back()">
                    <i class="fas fa-arrow-right me-2"></i>
                    رجوع
                </button>
            </div>

            <!-- Search -->
            <div class="mt-4">
                <p class="text-muted mb-2">أو ابحث عن ما تريد:</p>
                <div class="input-group">
                    <input type="text" class="form-control" placeholder="ابحث في النظام..." id="searchInput">
                    <button class="btn btn-primary" onclick="performSearch()">
                        <i class="fas fa-search"></i>
                    </button>
                </div>
            </div>
        </div>

        <!-- Help Links -->
        <div class="mt-4 text-center">
            <p class="text-muted mb-2">هل تحتاج مساعدة؟</p>
            <a href="{% url 'requests:dashboard' %}" class="text-dark me-3"><i class="fas fa-question-circle me-1"></i> مركز المساعدة</a>
            <a href="{% url 'requests:dashboard' %}" class="text-dark"><i class="fas fa-envelope me-1"></i> تواصل معنا</a>
        </div>
    </div>

    <!-- Bootstrap JS -->
    <script src="{% static 'assets/js/popper.min.js' %}"></script>
    <script src="{% static 'assets/js/bootstrap.min.js' %}"></script>

    <script>
        // الحصول على نوع الخطأ من URL
        const urlParams = new URLSearchParams(window.location.search);
        const errorType = urlParams.get('type') || '404';

        // تخصيص الخطأ حسب النوع
        const errors = {
            '404': {
                icon: 'fa-exclamation-triangle text-warning',
                code: '404',
                title: 'الصفحة غير موجودة',
                description: 'عذراً، الصفحة التي تبحث عنها غير موجودة أو تم نقلها إلى مكان آخر.'
            },
            '403': {
                icon: 'fa-ban text-danger',
                code: '403',
                title: 'ممنوع الوصول',
                description: 'عذراً، ليس لديك صلاحية للوصول إلى هذه الصفحة.'
            },
            '500': {
                icon: 'fa-server text-danger',
                code: '500',
                title: 'خطأ في الخادم',
                description: 'عذراً، حدث خطأ في الخادم. يرجى المحاولة لاحقاً أو التواصل مع الدعم الفني.'
            },
            'maintenance': {
                icon: 'fa-tools text-info',
                code: '',
                title: 'الصيانة الدورية',
                description: 'النظام تحت الصيانة حالياً. سنعود قريباً. شكراً لصبركم.'
            },
            'network': {
                icon: 'fa-wifi text-warning',
                code: '',
                title: 'خطأ في الاتصال',
                description: 'لا يمكن الاتصال بالخادم. يرجى التحقق من اتصالك بالإنترنت والمحاولة مرة أخرى.'
            }
        };

        const error = errors[errorType] || errors['404'];

        // تحديث المحتوى
        document.getElementById('errorIcon').innerHTML = `<i class="fas ${error.icon}"></i>`;
        document.getElementById('errorCode').textContent = error.code;
        document.getElementById('errorTitle').textContent = error.title;
        document.getElementById('errorDescription').textContent = error.description;

        // إخفاء كود الخطأ إذا كان فارغاً
        if (!error.code) {
            document.getElementById('errorCode').style.display = 'none';
        }

        // البحث
        function performSearch() {
            const searchTerm = document.getElementById('searchInput').value;
            if (searchTerm.trim()) {
                window.location.href = `index.html?search=${encodeURIComponent(searchTerm)}`;
            }
        }

        // البحث عند الضغط على Enter
        document.getElementById('searchInput').addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                performSearch();
            }
        });
    </script>
</body>
</html>

